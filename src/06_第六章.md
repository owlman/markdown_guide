# 第6章 Markdown的其他应用

## 本章提要

到目前为止，我们都是以论文写作这一工作的需求为导引来介绍`Markdown`在文字创作类项目中的应用的。这样做的好处是能较为全面地涵盖这门标记语言的各种特性和扩展，但对于其开放性，灵活度的体现尚略显不足。`Markdown`的作用远不止是充当文字创作类项目的“源码”那么单一，它还能用来制作演示文稿、电子书和博客系统。在这一章中，我们将致力于介绍`Markdown`在这些特定领域中的应用。

## 6.1 制作演示文稿

对于平常靠键盘就能完成大部分工作的人来说（譬如我），用Microsoft PowerPoint或Apple Keynote这类软件来制作演示文稿始终是一个挺折磨人的事情。想想那个过程吧，我们必须要时不时让手离开键盘，拿着鼠标来回又点击又拖拽的，短短十几页的演示文稿往往要花费两三个小时以上的时间。而且整个过程充满了“感觉可以了”，“看起来还行”之类的不确定感，也许对于喜欢画画的朋友来说，这是个很熟悉，甚至是很享受的体验，但对我这种喜欢用命令行和少量快捷键来控制计算机，且从不打游戏的人来说，这无疑是一件很难受的事情。当然，使用这些软件的确能制作出包含精美图文的、具有各种炫酷效果的演示文稿，但在大多数情况下，演示文稿的作用只不过是在论文答辩、会议简报或主题演讲的过程中做一点穿针引线，提示重点的辅助而已，如何提炼内容的重点才是我们制作这些演示文稿的关键，那些精美的图案和炫酷的效果对大多数人来说，并没有那么必要。而且习惯了盗版软件的我们可能还忘了，这些软件都不是免费的，价格还并不便宜，鉴于现在的时空背景，我们确定自己能一直使用盗版么？即使愿意花钱，我们也一定能卖到这些外国软件吗？这些都恐怕已经不只是道德问题，而是大家可能很快就要面对的现实问题了。[^1]

### 6.1.1 Marp简介

接下来，就让我们抛开对于炫酷效果的执念，看看`Markdown`这种自由开放、简洁高效的写作方式能给大家带来的解决方案，也就是我们打算在这里给大家推荐的一款工具：Marp。这是一款基于`Electron`框架[^2]开发的开源软件，它可以将`Markdown`格式的文字以演示文稿的形式显示出来，并支持导出为`PDF`文档，非常适合于对演示文稿的设计感要求不高，但对其内容产出效率有比较高要求的用户。该软件主要具有以下优点：

- 开源、自由、免费，使用不受任何非技术因素的限制。
- 跨平台，支持Windows、MacOS、Linux等主流操作系统平台。
- 支持实时预览，提供有`Markdown`、`1:1 Slide`、`Slide List`三种预览模式。
- 提供有`Default`和`Gaia`两种主题。
- 可以在演示文稿中显示表格、表情符号、数学公式以及背景图这些特定元素。
- 可调整演示文稿的页面尺寸。

当然，这款软件也有不足之处 譬如：

- 软件功能相对单薄，不支持图文绕排等复杂内容的显示。
- `1:1 Slide`预览模式不支持使用上下键翻页。
- `Markdown`、`Slide List`这两种预览模式则不支持左右滑动。

所以，我们在选择一个工具之前需要充分了解自己需求，区分出哪些是必需的，哪些是可有可无的，哪些完全没有必要的，这样才能找出最适合自己的、高性价比的解决方案，切忌意识形态用事，选择华而不实或者不足以解决问题的工具。

### 6.1.2 Marp的安装

Marp是以一个“开箱即用”的软件，安装过程非常简单，步骤如下：

- 步骤1. 打开浏览器，访问Marp的官方网站：`https://yhatt.github.io/marp/`。

  ![Marp的官方首页](img/6-1.png)

- 步骤2. 从上面点开的下拉菜单中选择符合自身需求的操作系统平台（譬如，我这里所使用的是Linux 32bit），以下载相应的软件包。

- 步骤3. 将下载到的软件包解压到我们要安装该软件的目录中，譬如我这里选择的是`/home/owlman/bin/app/marp/`这个目录。

  ![Marp的安装目录](img/6-2.png)

- 步骤4（可选）. 我们也可以为该程序设置一个快捷方式，譬如在Ubuntu下，我们可以创建一个`Marp.desktop`，内容如下：

   ```bash
   [Desktop Entry]
   Name=Marp
   Type=Application
   StartupNotify=true
   Icon=/home/owlman/bin/app/marp/marp.png
   Exec=/home/owlman/bin/app/marp/Marp
   ```

   然后将该文件保存在`/usr/share/applications`目录中即可，当然，在这里我们需要自己准备一个`marp.png`图形文件，以充当快捷方式的图标。

### 6.1.3 Marp的使用

在完成安装之后，我们就可以通过上述步骤4中创建的快捷方式或者直接在安装目录中单击`Marp`程序文件来启动该程序了，该程序的初始界面如下：

![Marp的初始界面](img/6-3.png)

现在，让我们先来熟悉一下这个界面。正如你所看到的，Marp的界面采用了常见的菜单栏、编辑区和底部工具栏三段式布局。其编辑区与大多数`Markdown`编辑器一样分成了左右两个区域，左边是`Markdown`编码区，右边是预览区。而在底部工具栏的右侧，我们看到三个按钮，它们对应了Marp的三种预览模式，从左至右分别为：

- `Markdown`模式：`Markdown`渲的普通染效果预览。
- `1:1 Slide`模式：演示文稿效果的预览，这也是Marp的默认模式。
- `Slide List`模式：这种形式会以列表的形式预览演示文稿，可执行滑动操作。

在熟悉了软件界面之后，接下来就可以开始学习如何用`Markdown`来制作演示文稿了。但正式这趟学习旅程之前，我们还是有必要先来介绍一下Marp所特有的两个概念：

- 第一，由于Marp本身就是由Github团队开发的，所以它的`Markdown`语法采用的是`GitHub Flavored Markdown`风格，支持Github对标准语法所做的部分扩展。

- 第二，Marp在`GitHub Flavored Markdown`语法的基础上还增加了一种**指令**元素，以便用来调整演示文稿的显示效果。该类元素的格式为`<!--指令名称:指令值-->`，譬如，如果我们想让演示文稿的页面采用16:9的长宽比。就可以在文稿的开头添加`<!--$size: 16:9-->`这样一条指令。当然，同一个指令元素中也可以包含多条指令，譬如：

  ```Markdown
  <!--
    $size: 16:9
    page_number:true
  -->
  ```

  这条指令不仅把演示文稿的长宽比设置成了16:9，而且会显示页码。
  
下面，我们通过Marp自带的示例来讲解一下如何用`Markdown`制作演示文稿。首先，请在Marp的菜单栏中依次点击「Help - Open Example - marp basic example」菜单来打开这个演示文稿示例，下面是该示例在默认的`1:1 Slide`模式下的效果：

![Marp的自带示例](img/6-4.png)

各位可以自行通过右下角的按钮来查看一下其他预览模式。下面，我们来看一下这个示例前两页的`Markdown`编码：

    Marp
    ===

    # ![](images/marp.png)

    ##### Markdown presentation writer, powered by [Electron](http://electron.atom.io/)

    ###### Created by Yuki Hattori ( [@yhatt](https://github.com/yhatt) )

    ---

    # Features

    - **Slides are written in Markdown.**
    - Cross-platform. Supports Windows, Mac, and Linux
    - Live Preview with 3 modes
    - Slide themes (`default`, `gaia`) and custom background images
    - Supports emoji :heart:
    - Render maths in your slides
    - Export your slides to PDF

    ---

从这两页的编码中，我们可以看出，`Markdown`的大部分语义元素在Marp中的渲染效果都与普通的`Markdown`文档一致，唯一不同的是`---`分隔符。该元素在一般`Markdown`文档中只是一条简单的分割线，而在Marp中，它就成为了演示文稿的分页符，用于将演示文稿的内容切分到不同的页面中，这是我们要学习的第一个Marp特有的`Markdown`语法。

当我们继续看下去时，就会发现这个示例不仅仅是一个语法示范，它本身就是一个Marp环境下的`Markdown`语法教程。譬如，在该实例第5-11页的编码中：

    ## Global Directives

    ### `$theme`

    Changes the theme of all the slides in the deck. You can also change from `View -> Theme` menu.

    ```
    <!-- $theme: gaia -->
    ```

    |Theme name|Value|Directive|
    |:-:|:-:|:-|
    |***Default***|default|`<!-- $theme: default -->`
    |**Gaia**|gaia|`<!-- $theme: gaia -->`


    ---

    ### `$width` / `$height`

    Changes width and height of all the slides.

    You can use units: `px` (default), `cm`, `mm`, `in`, `pt`, and `pc`.

    ```html
    <!-- $width: 12in -->
    ```

    ### `$size`

    Changes slide size by presets.

    Presets: `4:3`, `16:9`, `A0`-`A8`, `B0`-`B8` and suffix of `-portrait`.

    ```html
    <!-- $size: 16:9 -->
    ```

    <!--
    $size: a4

    Example is here. Global Directive is enabled in anywhere.
    It apply the latest value if you write multiple same Global Directives.
    -->

    ---

    ## Page Directives

    The page directive would apply to the  **current page and the following pages**.
    You should insert it *at the top* to apply it to all slides.

    ### `page_number`

    Set `true` to show page number on slides. *See lower right!*

    ```html
    <!-- page_number: true -->
    ```

    <!--
    page_number: true

    Example is here. Pagination starts from this page.
    If you use multi-line comment, directives should write to each new lines.
    -->

    ---

    ### `template`

    Set to use template of theme.

    The `template` directive just enables that using theme supports templates.

    ```html
    <!--
    $theme: gaia
    template: invert
    -->

    Example: Set "invert" template of Gaia theme.
    ```

    ---

    ### `footer`

    Add a footer to the current slide and all of the following slides

    ```html
    <!-- footer: This is a footer -->
    ```

    Example: Adds "This is a footer" in the bottom of each slide

    ---

    ### `prerender`

    Pre-renders a slide, which can prevent issues with very large background images.

    ```html
    <!-- prerender: true -->
    ```

    ---

我们可以看到，它详细列举了在Marp的指令元素中可以使用的指令。当然，如果你看不明白或者不喜欢看这些英文的演示文稿也没关系，我们下面根据这几页文稿的内容再来做一点转述说明：



## 6.2 发布为电子书

## 6.3 构建博客系统

## 本章小结

[^1]:注释：在作者写下这些文字的同时，新闻正在热炒Google终止向华为提供软件支持的事件。
[^2]:注释：这是一个基于JavaScript、HTML、CSS构建的跨平台的桌面应用框架。官方网站：https://electronjs.org/