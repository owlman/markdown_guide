# 附录C 了解一下Node.js

考虑到本书介绍的gitbook和Hexo都要基于Node.js运行环境来部署，而这个运行环境如今已经形成了如此庞大的软件生态系统，我认为有必要在这里专门介绍一下Node.js以及它的安装和配置。换而言之，在接下来的内容中，我们首先会对Node.js做一个简单的概述，让读者了解一下这是怎样的一个运行环境，它的设计理念以及组件管理。然后，我们会具体演示Node.js在Windows、MacOS和Linux上的安装与配置。希望大家在阅读完这篇附录之后。能对Node.js运行环境有一个初步的认知，并能在自己的计算机上安装这个运行环境，以及基于该环境的其他软件。

## C.1 Node.js概述

众所周知，`JavaScript`在很长一段时间内都被认为是一门只能依赖于浏览器的编程语言，这大大限制了这门优秀语言的使用范围。Node.js的出现改变了这一切，它是第一个能在服务器端运行`JavaScript`代码的、跨平台的运行环境，一举将`JavaScript`的作用领域扩展到了服务器端，使之释放出了巨大的生产力。

作为在服务器端运行的`JavaScript`环境，Node.js保留了`JavaScript`在浏览器端中所使用的大部分API，Node.js的作者Ryan Dahl并没有改写这门语言本身的任何特性，它的代码将依旧基于作用域和原型链来解释执行，这让Node.js在服务器端上的应用具备了以下这些与众不同的特性：

- **事件驱动**：在Web开发进入到Web 2.0时代以来，`JavaScript`在浏览器端承担了越来越重要的角色，其事件驱动的编程模型也逐渐深入人心。当然了，这种编程模型虽然具有轻量级、松耦合等优势，但在多个异步任务的场景下，由于程序中的各个事件是彼此独立的，它们之间的协作就成为了一个需要我们费心解决的问题。

- **异步编程**：在Node.js中，大部分操作都是以异步调用的方式来进行的。Node.js的开发者们在其底层构建了许多异步I/O的API，包括文件读取、网络请求等。这样一来，我们就可以很自然地在语言层面上调用并行的I/O操作，使得每个调用都无须等待之前的I/O调用结束，这带来了极大的效率提升。例如，如果我们想要读取两个相互不依赖的文件，如果采用的是异步I/O，其耗费的时间只取决于读取较慢的那个文件，而如果采用同步I/O的话，其耗时就是两个文件的读取时间之和了，异步操作模型带来的优势是显而易见的。

  除此之外，Node.js对回调函数的支持也是其一大特色。回调函数是执行异步调用并接收其返回数据的最佳方式，当然了，这种方式也会导致代码的编写顺序与其具体执行顺序的不一致，对于很多习惯同步思路编程的人来说，阅读这样的代码会是一个不小的挑战。另外在流程控制方面，也会由于程序中穿插了各种异步方法和回调函数，它也远没有常规的同步方式那么一目了然，这也会给我们对程序的理解和调试带来一定的麻烦。

- **单一线程**：这原本就是`JavaScript`语言的一大特性。`JavaScript`单一线程的特性，与它最初只作用于浏览器有关。在浏览器中，`JavaScript`的主要作用是响应用户的操作并处理DOM。这决定了它只能以单一线程的方式来执行，否则会带来很复杂的同步问题。例如，如果我们在浏览器上用`JavaScript`同时执行了两个线程，一个线程负责在指定的DOM节点上添加内容，另一个线程则负责删除这个节点，这时浏览器应该以哪个线程为准？
  
  Node.js保留了这种单一线程的执行特性。而且在Node.js中，`JavaScript`的执行线程与其他线程之间同样也是无法共享状态的。单一线程的最大好处是不用像多线程编程那样处理很容易产生bug的同步问题，这就从根本上杜绝了死锁问题，也避免了线程上下文交换所带来的性能上的开销。当然了，单一线程的执行方式也有它自身的弱点，譬如，它无法充分发挥多核处理器的性能、一个错误就会导致整个程序崩溃，以及执行大量计算时会因长期占用处理器而影响其他异步I/O的执行。

以上这些之所以被叫做特性，是因为它们实际上都是一些在已有技术上所做的取舍，了解它们的目的，就是为了让我们在考虑是否基于Node.js来开发相关应用时有自己的取舍。两者的取舍一致，譬如开发一些数据密集型、分布式实时应用程序，这些特性就会成为优势，但如果两者的取舍不一致，譬如开发一些需要大量计算、可靠性要求极高的程序，这些特性就会成为劣势。所以，只有了解自己手里的工具，我们才能做到事半功倍。

## C.2 Node.js的安装

## C.3 Node.js的包管理

<!--以下是注释区-->
